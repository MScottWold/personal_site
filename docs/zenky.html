<!-- 
  My nephew had so much fun playing with the background of the main site, he
  wanted to design his own custom version. This is that.
-->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zenky</title>
  <script src="./js/vendor/jquery-3.6.0.min.js"></script>
  <script src="https://mscottwold.github.io/constellation/js/constellation.js"></script>
  <script>
    const zenkyArtboard = {
      points: {
        0: [43, 45],
        1: [58, 46],
        2: [56, 36],
        3: [54, 55],
        4: [88, 51],
        5: [64, 27],
        6: [63, 38],
        7: [68, 41],
        8: [71, 84],
        9: [77, 83],
        10: [75, 73],
        11: [20, 90],
        12: [36, 70],
        13: [48, 88],
        14: [19, 31],
        15: [45, 19],
        16: [46, 19],
        17: [64, 17],
      },
      lines: [
        [
          10, 13, 8, 9, 10, 4, 5, 17, 15, 14, 11, 10, 12, 0, 17, 11, 12, 1, 4, 17,
          14, 0
        ],
        [12, 3, 0, 1, 3],
        [9, 4, 7, 17, 16, 11, 6, 2, 5]
      ],
      polygons: [
        [12, 0, 7, 4],
        [14, 17, 15],
        [13, 10, 9, 8]
      ],
      options: {
        vertices: {
          strokeColor: 'rgb(107, 170, 83)',
          fillColor: 'rgb(139, 2, 139)',
          altFillColor: 'rgb(3, 126, 3)',
          lineWidth: 2,
          radius: 4
        },
        shapes: {
          strokeColor: 'rgb(126, 11, 11)',
          fillColor: 'rgb(0, 0, 255)',
          lineWidth: 2,
        },
        stretch: true
      }
    };

    $(() => {
      const constellationManager = {
        constellation: initConstellation('my-canvas', zenkyArtboard),

        $viewCtrPanelButton: $('#view-ctr-panel'),

        $bkgdButtons: $('#bkgd-buttons'),

        $modeButtons: $('#bkgd-modes button'),

        hideLinesOption: document.getElementById('hide-lines'),

        _hideControls: function () {
          this.$viewCtrPanelButton.removeClass('active').html('&xdtri;');
          this.$bkgdButtons.removeClass('show');
        },

        _toggleCtrPanel: function (e) {
          const $button = $(e.currentTarget);
          $button.toggleClass('active');
          if ($button.is('.active')) {
            $button.html('&xutri;');
          } else {
            $button.html('&xdtri;');
          }

          this.$bkgdButtons.toggleClass('show');
        },

        _changeMode: function (e) {
          const $button = $(e.currentTarget);
          this.constellation.changeMouseMode($button.data('bkgdMode'));
          this.$modeButtons.removeClass('active');
          $button.addClass('active');

          if ($button.data('bkgdMode') === 'default') {
            this.constellation.resetArtboard(artboard);
            this.hideLinesOption.checked = false;
          }

          this._hideControls();
        },

        init: function () {
          this.$viewCtrPanelButton.on('click', this._toggleCtrPanel.bind(this));
          $('#bkgd-modes').on('click', 'button', this._changeMode.bind(this));
          this.hideLinesOption.addEventListener('click', () => {
            this.constellation.toggleLines()
          });
        },
      };

      constellationManager.init();
    });
  </script>
  <style>
    html, body, header, footer, section,
    a, h1, h2, img, p, div, button, canvas {
      margin: 0;
      border: 0;
      padding: 0;
      outline: 0;
      box-sizing: inherit;
      font: inherit;
      text-decoration: inherit;
      text-align: inherit;
      color: inherit;
      background: transparent;
    }
    
    body {
      position: relative;
      height: 100%;
      font-family: 'Lato', sans-serif;
      background-color: rgb(0, 163, 204);
      overflow: auto;
    }

    body * {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    #background-img {
      position: fixed;
      display: block;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      touch-action: none;
    }

    #ctr-panel {
      position: absolute;
      top: 0;
      transition: bottom 0.2s ease;
    }
    #ctr-panel button {
      box-sizing: border-box;
      color: #F5EFD5;
      border-radius: 5px;
      padding: 8px 10px;
      margin: 10px;
      background-image: linear-gradient(180deg, #102A3B, rgba(16, 42, 59, 0.4));
      cursor: pointer;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    #ctr-panel button:hover {
      background-image: linear-gradient(180deg, rgba(135, 153, 140, 0.6), rgba(135, 153, 140, 0.4));
    }
    #ctr-panel button:active {
      background-image: linear-gradient(180deg, rgba(135, 153, 140, 0.4), rgba(135, 153, 140, 0.2));
    }
    #ctr-panel button.active {
      background-image: linear-gradient(180deg, rgba(135, 153, 140, 0.6), rgba(135, 153, 140, 0.2));
      color: #102A3B;
    }
    #ctr-panel button.active:active {
      background-image: linear-gradient(180deg, rgba(135, 153, 140, 0.4), rgba(135, 153, 140, 0.4));
    }

    #bkgd-buttons {
      height: 0;
      overflow: hidden;
      transition: height 0.2s ease;
    }
    #bkgd-buttons.show {
      height: 305px;
    }
    #bkgd-buttons label, #bkgd-buttons input {
      cursor: pointer;
      margin: 5px;
      border-radius: 3px;
      padding-right: 5px;
    }
    #bkgd-buttons label:hover {
      background-color: rgba(16, 42, 59, 0.5);
    }
    #bkgd-buttons p, #bkgd-buttons label {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    #bkgd-buttons p {
      margin: 0 5px;
      font-size: 0.85em;
    }
    #bkgd-buttons p:last-of-type {
      text-align: right;
      margin-bottom: 5px;
    }

    #bkgd-modes {
      display: flex;
      flex-direction: column;
      margin: 5px 0;
    }
    #bkgd-modes button {
      margin: 0 5px;
      border-radius: 0;
    }
    #bkgd-modes button:first-of-type {
      border-radius: 5px 5px 0 0;
    }
    #bkgd-modes button:last-of-type {
      border-radius: 0 0 5px 5px;
    }
  </style>
</head>

<body>
  <!-- 
    My nephew had so much fun playing with the background of the main site, he
    wanted to design his own custom version. This is that.
  -->
  <div id="background-img">
    <canvas id="my-canvas"></canvas>
  </div>
  <div id="ctr-panel">
    <button id="view-ctr-panel">Show Controls</button>
    <div id="bkgd-buttons">
      <p>Mode:</p>
      <div id="bkgd-modes">
        <button class="active" data-bkgd-mode="default">Reset</button>
        <button data-bkgd-mode="coalesce">Coalesce*</button>
        <button data-bkgd-mode="radiate">Radiate</button>
        <button data-bkgd-mode="create">Create</button>
        <button data-bkgd-mode="destroy">Destroy*</button>
      </div>
      <p>*click and hold</p>
      <label><input type="checkbox" id="hide-lines">Erase Lines</label>
    </div>
  </div>
</body>

</html>
